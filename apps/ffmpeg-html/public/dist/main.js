!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FFmpegWeb=e():t.FFmpegWeb=e()}(self,(()=>(()=>{"use strict";var t={m:{},d:(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},u:t=>t+".js"};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href;var e={};t.r(e),t.d(e,{FFmpeg:()=>p});var r,n,o,i,a,s,u,c=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},f=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},l=function(t,e,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(t):n?n.value:e.get(t)},p=function(){function e(){var t=this;r.set(this,null),n.set(this,{}),o.set(this,{}),i.set(this,[]),a.set(this,[]),s.set(this,(function(){l(t,r,"f")&&(l(t,r,"f").onmessage=function(e){var r=e.data,i=r.id,a=r.type,s=r.data;"ERROR"===a?l(t,o,"f")[i](s):l(t,n,"f")[i](s),delete l(t,n,"f")[i],delete l(t,o,"f")[i]})})),u.set(this,(function(e,i){var a=e.type,s=e.data;if(l(t,r,"f")){var u=Math.random().toString(36).substr(2,9);return new Promise((function(e,c){l(t,r,"f")&&l(t,r,"f").postMessage({id:u,type:a,data:s},i),l(t,n,"f")[u]=e,l(t,o,"f")[u]=c}))}throw new Error("ERRORS.WORKER_NOT_INITIALIZED")})),this.module=null}return e.prototype.load=function(){return c(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return l(this,r,"f")||(function(t,e,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?o.call(t,r):o?o.value=r:e.set(t,r)}(this,r,new Worker(new URL(t.p+t.u(925),t.b),{type:void 0}),"f"),l(this,s,"f").call(this)),console.log("load worker:",l(this,r,"f")),[4,l(this,u,"f").call(this,{type:"LOAD",data:"./wasm/ffmpeg.js"})];case 1:return[2,e.sent()]}}))}))},e.prototype.exec=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){return console.log("FFmpeg command:",t),l(this,u,"f").call(this,{type:"EXEC",data:t}),[2]}))}))},e.prototype.createDir=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){return[2,l(this,u,"f").call(this,{type:"CREATE_DIR",data:t})]}))}))},e.prototype.writeFile=function(t,e){return c(this,void 0,void 0,(function(){var r;return f(this,(function(n){return r=[e.buffer],[2,l(this,u,"f").call(this,{type:"WRITE_FILE",data:{path:t,data:e}},r)]}))}))},e.prototype.readFile=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){return[2,l(this,u,"f").call(this,{type:"READ_FILE",data:t})]}))}))},e.prototype.listFiles=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){return[2,l(this,u,"f").call(this,{type:"LIST_DIR",data:t})]}))}))},e.prototype.fileExists=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){return[2,l(this,u,"f").call(this,{type:"FILE_EXISTS",data:t})]}))}))},e}();return r=new WeakMap,n=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,s=new WeakMap,u=new WeakMap,e})()));