!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FFmpegWeb=e():t.FFmpegWeb=e()}(self,(()=>(()=>{"use strict";var t={m:{},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},u:t=>"ffmpeg-worker.js",o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},p:"/dist/"};t.b=document.baseURI||self.location.href;var e,n={};t.r(n),t.d(n,{FFmpeg:()=>E}),function(t){t.LOAD="LOAD",t.EXEC="EXEC",t.WRITE_FILE="WRITE_FILE",t.READ_FILE="READ_FILE",t.DELETE_FILE="DELETE_FILE",t.RENAME="RENAME",t.CREATE_DIR="CREATE_DIR",t.LIST_DIR="LIST_DIR",t.DELETE_DIR="DELETE_DIR",t.ERROR="ERROR",t.DOWNLOAD="DOWNLOAD",t.PROGRESS="PROGRESS",t.LOG="LOG",t.MOUNT="MOUNT",t.UNMOUNT="UNMOUNT",t.FILE_EXISTS="FILE_EXISTS"}(e||(e={})),new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),new Error("Failed to import core FFmpeg module, check the console for more information"),new Error("Unknown message type");var r,o,i,a,f,s,u,c=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function f(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,f)}s((r=r.apply(t,e||[])).next())}))},l=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:f(0),throw:f(1),return:f(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function f(f){return function(s){return function(f){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,f[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&f[0]?r.return:f[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,f[1])).done)return o;switch(r=0,o&&(f=[2&f[0],o.value]),f[0]){case 0:case 1:o=f;break;case 4:return a.label++,{value:f[1],done:!1};case 5:a.label++,r=f[1],f=[0];continue;case 7:f=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==f[0]&&2!==f[0])){a=0;continue}if(3===f[0]&&(!o||f[1]>o[0]&&f[1]<o[3])){a.label=f[1];break}if(6===f[0]&&a.label<o[1]){a.label=o[1],o=f;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(f);break}o[2]&&a.ops.pop(),a.trys.pop();continue}f=e.call(t,a)}catch(t){f=[6,t],r=0}finally{n=o=0}if(5&f[0])throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}([f,s])}}},p=function(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)},h=function(t,e,n,r,o){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?o.call(t,n):o?o.value=n:e.set(t,n),n},E=function(){function n(){var t=this;r.set(this,null),o.set(this,{}),i.set(this,{}),a.set(this,[]),f.set(this,[]),this.loaded=!1,s.set(this,(function(){p(t,r,"f")&&(p(t,r,"f").onmessage=function(n,r){var s=n.data,u=s.id,c=s.type,l=s.data;switch(c){case e.LOAD:t.loaded=!0,p(t,o,"f")[u](l);break;case e.EXEC:case e.CREATE_DIR:case e.WRITE_FILE:case e.READ_FILE:case e.DELETE_FILE:case e.LIST_DIR:case e.FILE_EXISTS:p(t,o,"f")[u](l);break;case e.ERROR:p(t,i,"f")[u](l);break;case e.LOG:p(t,a,"f").forEach((function(t){return t(l)}));break;case e.PROGRESS:p(t,f,"f").forEach((function(t){return t(l)}));break;default:throw c}delete p(t,o,"f")[u],delete p(t,i,"f")[u]})})),u.set(this,(function(e,n){var a=e.type,f=e.data;if(p(t,r,"f")){var s=Math.random().toString(36).substr(2,9);return new Promise((function(e,u){p(t,r,"f")&&p(t,r,"f").postMessage({id:s,type:a,data:f},n),p(t,o,"f")[s]=e,p(t,i,"f")[s]=u}))}throw new Error("ERRORS.WORKER_NOT_INITIALIZED")})),this.terminate=function(){for(var e=0,n=Object.keys(p(t,i,"f"));e<n.length;e++){var a=n[e];p(t,i,"f")[a](ERROR_TERMINATED),delete p(t,i,"f")[a],delete p(t,o,"f")[a]}p(t,r,"f")&&(p(t,r,"f").terminate(),h(t,r,null,"f"),t.loaded=!1)},this.module=null}return n.prototype.load=function(){return c(this,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return p(this,r,"f")||(h(this,r,new Worker(new URL(t.p+t.u(231),t.b),{type:void 0}),"f"),p(this,s,"f").call(this)),[4,p(this,u,"f").call(this,{type:"LOAD",data:"./wasm/ffmpeg.js"})];case 1:return[2,e.sent()]}}))}))},n.prototype.on=function(t,e){"log"===t?p(this,a,"f").push(e):"progress"===t&&p(this,f,"f").push(e)},n.prototype.off=function(t,e){"log"===t?h(this,a,p(this,a,"f").filter((function(t){return t!==e})),"f"):"progress"===t&&h(this,f,p(this,f,"f").filter((function(t){return t!==e})),"f")},n.prototype.exec=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return[4,p(this,u,"f").call(this,{type:e.EXEC,data:t})];case 1:return[2,n.sent()]}}))}))},n.prototype.createDir=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){return[2,p(this,u,"f").call(this,{type:e.CREATE_DIR,data:t})]}))}))},n.prototype.writeFile=function(t,n){return c(this,void 0,void 0,(function(){var r;return l(this,(function(o){return r=[n.buffer],[2,p(this,u,"f").call(this,{type:e.WRITE_FILE,data:{path:t,data:n}},r)]}))}))},n.prototype.readFile=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){return[2,p(this,u,"f").call(this,{type:e.READ_FILE,data:t})]}))}))},n.prototype.deleteFile=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){return[2,p(this,u,"f").call(this,{type:e.DELETE_FILE,data:t})]}))}))},n.prototype.listFiles=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){return[2,p(this,u,"f").call(this,{type:e.LIST_DIR,data:t})]}))}))},n.prototype.fileExists=function(t){return c(this,void 0,void 0,(function(){return l(this,(function(n){return[2,p(this,u,"f").call(this,{type:e.FILE_EXISTS,data:t})]}))}))},n}();return r=new WeakMap,o=new WeakMap,i=new WeakMap,a=new WeakMap,f=new WeakMap,s=new WeakMap,u=new WeakMap,n})()));